<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="host">

  <!-- 로그인 사용자 공간 목록 -->
  <select id="spaces_by_user" parameterType="long" resultType="com.javaex.vo.HostVO">
    select
      spacesNo       as spacesno,
      userNo         as userno,
      spaceName      as spacename,
      spaceSummary   as spacesummary,
      spaceInfo      as spaceinfo,
      email          as email,
      phone          as phone,
      tel            as tel,
      spaceLink      as spacelink,
      postCode       as postcode,
      address        as address,
      addressDetail  as addressdetail,
      date_format(instDtm, '%Y-%m-%d %H:%i:%s') as inst_dt,
      date_format(updtDtm, '%Y-%m-%d %H:%i:%s') as updt_dt
    from spaces
    where userNo = #{value}
    order by instDtm desc, spacesNo desc
  </select>

  <!-- 단건 조회 (수정 폼용) -->
  <select id="space_by_no" parameterType="long" resultType="com.javaex.vo.HostVO">
    select
      spacesNo       as spacesno,
      userNo         as userno,
      spaceName      as spacename,
      spaceSummary   as spacesummary,
      spaceInfo      as spaceinfo,
      email          as email,
      phone          as phone,
      tel            as tel,
      spaceLink      as spacelink,
      postCode       as postcode,
      address        as address,
      addressDetail  as addressdetail,
      date_format(instDtm, '%Y-%m-%d %H:%i:%s') as inst_dt,
      date_format(updtDtm, '%Y-%m-%d %H:%i:%s') as updt_dt
    from spaces
    where spacesNo = #{value}
    limit 1
  </select>

</mapper>
