<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="practiceroom">
	
	<select id="selectList" resultType="com.javaex.vo.SpacesVO">
		<![CDATA[
        SELECT
            spacesNo
            ,userNo
            ,spaceName
            ,spaceSummary
            ,spaceInfo
            ,email
            ,phone
            ,tel
            ,spaceLink
            ,postCode
            ,address
            ,addressDetail
            ,instDtm
            ,updtDtm
		FROM spaces
		ORDER BY spacesNo
	    ]]>
    </select>
    
    <select id="selectPaged" parameterType="map" resultType="com.javaex.vo.SpacesVO">
	  SELECT
	    spacesNo, userNo, spaceName, spaceSummary, spaceInfo,
	    email, phone, tel, spaceLink, postCode, address, addressDetail,
	    instDtm, updtDtm
	  FROM spaces
	  ORDER BY spacesNo
	  LIMIT #{offset,jdbcType=INTEGER}, #{size,jdbcType=INTEGER}
	</select>
    
    <!-- 특정 공간 상세 -->
    <select id="selectZoneDetail" parameterType="long" resultType="com.javaex.vo.SpacesVO">
        SELECT
            spacesNo, userNo, spaceName, spaceSummary, spaceInfo,
            email, phone, tel, spaceLink, postCode,
            address, addressDetail, instDtm, updtDtm
        FROM spaces
        WHERE spacesNo = #{spacesNo}
    </select>

    <!-- 특정 공간의 방 리스트 -->
    <select id="selectRoomsBySpace" parameterType="long" resultType="com.javaex.vo.RoomsVO">
        SELECT
            roomNo,
            spacesNo,
            roomName,
            roomInfo,
            area,
            capacity,
            instDtm,
            updtDtm
        FROM rooms
        WHERE spacesNo = #{spacesNo}
        ORDER BY roomNo
    </select>
    
    <select id="selectFavoriteSpaces" parameterType="long" resultType="com.javaex.vo.SpacesVO">
	    SELECT DISTINCT
	        s.spacesNo, s.userNo, s.spaceName, s.spaceSummary, s.spaceInfo,
	        s.email, s.phone, s.tel, s.spaceLink, s.postCode, s.address, s.addressDetail,
	        s.instDtm, s.updtDtm
	    FROM spaces s
	    JOIN rooms r ON s.spacesNo = r.spacesNo
	    JOIN studioWishlist sw ON r.roomNo = sw.roomNo
	    WHERE sw.userNo = #{userNo}
	    ORDER BY s.spacesNo ASC
	</select>
    
</mapper>